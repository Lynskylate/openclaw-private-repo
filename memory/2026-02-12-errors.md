# OpenClaw Gateway é”™è¯¯æ—¥å¿—åˆ†æ
æ—¥æœŸ: 2026-02-12
åˆ†æäºº: å°é¾™è™¾ ğŸ¦

## æ¦‚è¦

ä»Šæ—¥é”™è¯¯æ—¥å¿— (`/var/log/openclaw/gateway.log`) æ˜¾ç¤ºä»¥ä¸‹ä¸»è¦é”™è¯¯ç±»å‹ï¼š

---

## 1. API Key æ— æ•ˆé”™è¯¯ âš ï¸

**æ—¶é—´**: 2026-02-12T11:50-11:51 UTC
**é”™è¯¯**: `FailoverError: HTTP 401 authentication_error: Invalid API key`
**å½±å“**: Agent main lane å’Œ session è·¯ç”±å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ OpenAI API key æ˜¯å¦æœ‰æ•ˆä¸”æœªè¿‡æœŸ
- åœ¨é…ç½®ä¸­æ›´æ–° API key
- æ£€æŸ¥ fallover é…ç½®æ˜¯å¦æœ‰å¯ç”¨çš„å¤‡ç”¨ API key

---

## 2. Playwright æµè§ˆå™¨é”™è¯¯ ğŸŒ

**æ—¶é—´**: 2026-02-12T13:47-14:32 UTC
**é”™è¯¯**:
```
BrowserType.launch: Executable doesn't exist at
/opt/openclaw/.cache/ms-playwright/chromium_headless_shell-1208/chrome-headless-shell-linux64/chrome-headless-shell
```
`The browser 'default' is not open, please run open first`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å®‰è£… Playwright æµè§ˆå™¨
npx playwright install chromium-headless-shell

# æˆ–è€…é€šè¿‡ skill
playwright-cli install
```

---

## 3. Tavily æ¨¡å—é”™è¯¯ ğŸ”

**æ—¶é—´**: 2026-02-12T13:24-14:11 UTC
**é”™è¯¯**:
- `npm error enoent ENOENT: no such file or directory, mkdir '/usr/lib/node_modules/@tavily'`
- `Cannot find module 'tavily'`
- `scripts/tavily_search.py: not found`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å…¨å±€å®‰è£… tavily npm åŒ…
sudo npm install -g @tavily/sdk

# æˆ–è€…åœ¨ workspace ä¸‹å®‰è£…
cd /opt/openclaw/.openclaw/workspace
npm install @tavily/sdk
```

---

## 4. Feishu é›†æˆé”™è¯¯ ğŸ¦…

**æ—¶é—´**: å¤šæ¬¡å‡ºç°ï¼ˆ14:16, 15:06, 15:42, 15:43 UTCï¼‰
**é”™è¯¯**:
- `Request failed with status code 400`
- `Error when parsing request`
- `sendMediaFeishu failed: Error: Local file not found: ukdwd-stock.png`

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
- æ–‡ä»¶ä¸å­˜åœ¨æ—¶ä¸å°è¯•å‘é€
- éªŒè¯ media å‚æ•°å’Œæ–‡ä»¶å­˜åœ¨æ€§

---

## 5. æƒé™é”™è¯¯ ğŸ”’

**æ—¶é—´**: 2026-02-12T13:33, 14:33, 15:34, 16:11 UTC
**é”™è¯¯**:
- `sudo: The "no new privileges" flag is set, which prevents sudo from running as root`
- `mkdir: cannot create directory 'skills/public/stock-analysis': Read-only file system`
- `permission denied while trying to connect to the Docker daemon socket`

**è§£å†³æ–¹æ¡ˆ**:
- Docker æƒé™: å°† openclaw ç”¨æˆ·åŠ å…¥ docker ç»„
  ```bash
  sudo usermod -aG docker openclaw
  ```
- é¿å…åœ¨åªè¯»è·¯å¾„åˆ›å»ºæ–‡ä»¶ï¼Œä½¿ç”¨ workspace ç›®å½•
- systemctl æƒé™æ£€æŸ¥ DBUS_SESSION_BUS_ADDRESS

---

## 6. WebSocket é…ç½®é”™è¯¯ ğŸ”Œ

**æ—¶é—´**: 2026-02-12T14:31 UTC
**é”™è¯¯**: `config.set 13ms errorCode=INVALID_REQUEST errorMessage=invalid config`

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥é…ç½®æ–‡ä»¶çš„ JSON æ ¼å¼
- éªŒè¯é…ç½® schema åŒ¹é…

---

## 7. æ–‡ä»¶/è·¯å¾„ä¸å­˜åœ¨ ğŸ“

**æ—¶é—´**: 2026-02-12T13:33-15:33 UTC
**é”™è¯¯**:
- `/opt/openclaw/.openclaw/workspace/skills/skill-creator/SKILL.md`
- `/usr/local/src/openclaw/scripts/init_skill.py`
- `scripts/tavily_search.py`
- workspace-explorer ç›¸å…³æ–‡ä»¶

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®è®¤è¿™äº›æ–‡ä»¶/è„šæœ¬æ˜¯å¦å­˜åœ¨
- æ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®
- è€ƒè™‘åˆ›å»ºç¼ºå¤±çš„æ–‡ä»¶æˆ–æ›´æ–°å¼•ç”¨

---

## 8. æ¨¡å¼éªŒè¯é”™è¯¯ âœ…

**æ—¶é—´**: 2026-02-12T15:06, 15:42 UTC
**é”™è¯¯**: `field validation failed` (Feishu è¯·æ±‚)

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ Feishu API è¯·æ±‚å‚æ•°æ˜¯å¦ç¬¦åˆ schema
- ç‰¹åˆ«å…³æ³¨ required å­—æ®µ

---

## 9. Message å‘é€é”™è¯¯ ğŸ“¨

**æ—¶é—´**: 2026-02-12T14:16, 15:54, 15:55 UTC
**é”™è¯¯**:
- `write ECONNRESET`
- `Action send requires a target`
- `Feishu account "default" not configured`

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ Feishu è´¦å·é…ç½®
- æ£€æŸ¥ target å‚æ•°æ˜¯å¦æ­£ç¡®
- å¤„ç†ç½‘ç»œè¿æ¥é‡ç½®

---

## 10. Web Fetch é”™è¯¯ ğŸŒ

**æ—¶é—´**: 2026-02-12T14:34, 15:31 UTC
**é”™è¯¯**:
- `Web fetch failed (504)`
- `Web fetch failed (404)`

**è§£å†³æ–¹æ¡ˆ**:
- 504: æœåŠ¡è¶…æ—¶ï¼Œé‡è¯•æˆ–æ£€æŸ¥ç›®æ ‡ç«™ç‚¹
- 404: æ£€æŸ¥ URL æ˜¯å¦æ­£ç¡®

---

## ä¼˜å…ˆå¤„ç†äº‹é¡¹

### ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆå½±å“æ ¸å¿ƒåŠŸèƒ½ï¼‰
1. **API Key æ— æ•ˆ** - å½±å“ agent è¿è¡Œ
2. **Playwright æµè§ˆå™¨** - å½±å“ playwright-cli skill
3. **Docker æƒé™** - å½±å“ exec å·¥å…·

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§
4. **Tavily æ¨¡å—** - å½±å“ search åŠŸèƒ½
5. **Feishu é›†æˆ** - å½±å“æ¶ˆæ¯å‘é€

### ğŸŸ¢ ä½ä¼˜å…ˆçº§
6. ~~WebSocket é…ç½®~~ï¼ˆå¶å‘ï¼‰
7. ~~æ–‡ä»¶è·¯å¾„é—®é¢˜~~ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰

---

## è¡ŒåŠ¨è®¡åˆ’

### ç«‹å³æ‰§è¡Œ
```bash
# 1. æ£€æŸ¥å¹¶æ›´æ–° API Key é…ç½®
openclaw gateway config.get

# 2. å®‰è£… Playwright æµè§ˆå™¨
npx playwright install chromium-headless-shell

# 3. å®‰è£… Tavily SDK
cd /opt/openclaw/.openclaw/workspace
npm install @tavily/sdk

# 4. ä¿®å¤ Docker æƒé™ï¼ˆéœ€è¦ rootï¼‰
sudo usermod -aG docker openclaw
# ä¹‹åéœ€è¦é‡æ–°ç™»å½•æˆ–é‡å¯æœåŠ¡
```

### éªŒè¯
- æµ‹è¯• agent è·¯ç”±æ˜¯å¦æ­£å¸¸
- æµ‹è¯• playwright-cli åŠŸèƒ½
- æµ‹è¯• tavily search
- æµ‹è¯• Feishu æ¶ˆæ¯å‘é€

---

## ç³»ç»Ÿä¿¡æ¯

- æ—¥å¿—è·¯å¾„: `/var/log/openclaw/gateway.log`
- å½“å‰ç”¨æˆ·: `openclaw`
- æ£€æµ‹æ—¶é—´: 2026-02-12 16:11 UTC
- åˆ†ææ¡ç›®: æœ€è¿‘ 100 æ¡é”™è¯¯æ—¥å¿—

---

_è®°å½•äºº: å°é¾™è™¾ ğŸ¦ | æ ‡è®°: memory-smoke-1770912227_
